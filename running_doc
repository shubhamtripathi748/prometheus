management.endpoints.web.exposure.include=*
management.endpoint.metrics.enabled=true
management.endpoint.prometheus.enabled=true
management.endpoint.health.show-details=always

Caused by: java.lang.ClassNotFoundException: io.prometheus.client.CollectorRegistry


@Bean
public CollectorRegistry collectorRegistry() {
    return CollectorRegistry.defaultRegistry;
}

io.prometheus.client.CollectorRegistry


org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.NoClassDefFoundError: io/prometheus/client/exporter/common/TextFormat

topk(3,sum by(path,method)(rate(demo_api_request_duration_seconds_count[5m])))



rule_files:
  - alert.rules.yml
alerting:
  alertmanagers:
  - static_configs:
    - targets:
      - 'localhost:9093'


https://github.com/shazforiot/Prometheusalertmanager/blob/main/prometheus.yml

https://www.youtube.com/watch?v=6Jr6rntMI3A&list=PL3DVKoq8wxjQiXgEoolzQblS371f67Ifz&index=2

email alert
https://www.youtube.com/watch?v=x2qTvTN8YKI
